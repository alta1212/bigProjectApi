<!DOCTYPE html>
<html lang="en">


<head>
    <title>Thêm sản phẩm</title>
    <!--== META TAGS ==-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!--== FAV ICON ==-->
    <link rel="shortcut icon" href="images/fav.ico">

    <!-- GOOGLE FONTS -->


    <!-- FONT-AWESOME ICON CSS -->
    <link rel="stylesheet" href="css/font-awesome.min.css">

    <!--== ALL CSS FILES ==-->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mob.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/materialize.css" />
    <!-- cusstom js -->
</head>

<body>

    <div class="container-fluid sb1">
        <div class="row">
            <!--== LOGO ==-->
            <div class="col-md-2 col-sm-3 col-xs-6 sb1-1">
                <a href="#" class="btn-close-menu"><i class="fa fa-times" aria-hidden="true"></i></a>
                <a href="#" class="atab-menu"><i class="fa fa-bars tab-menu" aria-hidden="true"></i></a>
                <a href="index.html" class="logo"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/10/Fake_Taxi_logo.svg/1280px-Fake_Taxi_logo.svg.png" alt="" />
                </a>
            </div>
            <!--== SEARCH ==-->
            <div class="col-md-6 col-sm-6 mob-hide">
                <form class="app-search">
                    <input type="text" placeholder="Search..." class="form-control">
                    <a href="#"><i class="fa fa-search"></i></a>
                </form>
            </div>
            <!--== NOTIFICATION ==-->
            <div class="col-md-2 tab-hide">
                <div class="top-not-cen">
                    <a class='waves-effect btn-noti' href='#'><i class="fa fa-envelope-o" aria-hidden="true"></i><span>5</span></a>
                </div>
            </div>
            <!--== MY ACCCOUNT ==-->
            <div class="col-md-2 col-sm-3 col-xs-6">
                <!-- Dropdown Trigger -->
                <a class='waves-effect dropdown-button top-user-pro' href='#' data-activates='top-menu'><img src="images/user/6.png" alt="" />My Account <i class="fa fa-angle-down" aria-hidden="true"></i>
                </a>

                <!-- Dropdown Structure -->
                <ul id='top-menu' class='dropdown-content top-menu-sty'>
                    <li><a href="setting.html" class="waves-effect"><i class="fa fa-cogs" aria-hidden="true"></i>Admin Setting</a>
                    </li>
                    <li><a href="listing-all.html" class="waves-effect"><i class="fa fa-list-ul" aria-hidden="true"></i> Listings</a>
                    </li>
                    <li><a href="hotel-all.html" class="waves-effect"><i class="fa fa-building-o" aria-hidden="true"></i> Hotels</a>
                    </li>
                    <li><a href="package-all.html" class="waves-effect"><i class="fa fa-umbrella" aria-hidden="true"></i> Tour Packages</a>
                    </li>
                    <li><a href="event-all.html" class="waves-effect"><i class="fa fa-flag-checkered" aria-hidden="true"></i> Events</a>
                    </li>
                    <li><a href="offers.html" class="waves-effect"><i class="fa fa-tags" aria-hidden="true"></i> Offers</a>
                    </li>
                    <li><a href="user-add.html" class="waves-effect"><i class="fa fa-user-plus" aria-hidden="true"></i> Add New User</a>
                    </li>
                    <li><a href="#" class="waves-effect"><i class="fa fa-undo" aria-hidden="true"></i> Backup Data</a>
                    </li>
                    <li class="divider"></li>
                    <li><a href="#" class="ho-dr-con-last waves-effect"><i class="fa fa-sign-in" aria-hidden="true"></i> Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!--== BODY CONTNAINER ==-->
    <div class="container-fluid sb2">
        <div class="row">
            <div class="sb2-1">
                <!--== USER INFO ==-->
                <div class="sb2-12">
                    <ul>
                        <li><img src="images/placeholder.jpg" alt="">
                        </li>
                        <li>
                            <h5>Victoria Baker <span> Santa Ana, CA</span></h5>
                        </li>
                        <li></li>
                    </ul>
                </div>
                <!--== LEFT MENU ==-->
                <div class="sb2-13">
                    <ul class="collapsible" data-collapsible="accordion">
                        <li><a href="index.html" class="menu-active"><i class="fa fa-bar-chart" aria-hidden="true"></i> Dashboard</a>
                        </li>
                        <li><a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-list-ul" aria-hidden="true"></i>Bill</a>
                            <div class="collapsible-body left-sub-menu">
                                <ul>
                                    <li><a href="order-all.html">All oder</a>
                                    </li>
                                    
                                </ul>
                            </div>
                        </li>
                        <li><a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-umbrella" aria-hidden="true"></i> Product </a>
                            <div class="collapsible-body left-sub-menu">
                                <ul>
                                    <li><a href="product-all.html">All Product</a>
                                    </li>
                                    <li><a href="product-add.html">Add New Product</a>
                                    </li>
                                  
                                </ul>
                            </div>
                        </li>
                        <li><a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-h-square" aria-hidden="true"></i> Categories</a>
                            <div class="collapsible-body left-sub-menu">
                                <ul>
                                    <li><a href="category-all.html">All Categories</a>
                                    </li>
                                    <li><a href="category-add.html">Add New Categories</a>
                                    </li>
                                   
                                </ul>
                            </div>
                        </li>
                        <li class=""><a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-user" aria-hidden="true"></i> Users</a>
                            <div class="collapsible-body left-sub-menu" style="display: none;">
                                <ul>
                                    <li><a href="user-all.html">All Users</a>
                                    </li>
                                    <li><a href="user-add.html">Add New user</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="sb2-2">
                <div class="sb2-2-2">
                    <ul>
                        <li><a href="#"><i class="fa fa-home" aria-hidden="true"></i> Home</a>
                        </li>
                        <li class="active-bre"><a href="#"> Ui Form</a>
                        </li>
                    </ul>
                </div>
                <div class="sb2-2-3">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="box-inn-sp">
                                <div class="inn-title">
                                    <h4>Thêm sản phẩm</h4>

                                </div>
                                <div class="tab-inn">
                                    <form id="addProduct">
                                        <div class="row">
                                            <div class="input-field col s6">
                                                <input required id="name" type="text" name="name" class="validate">
                                                <label for="name">Tên Sản phẩm</label>
                                            </div>
                                            <div class="input-field col s6">
                                                <select id="type" required>
                                                    <option value="" disabled selected>Chọn loại sản phẩm</option>
                                                   
                                                </select>
                                                <label>Loại sản phẩm</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="input-field col s6">
                                                <input required id="price" type="number" class="validate">
                                                <label for="price">Giá</label>
                                            </div>
                                            <div class="input-field col s6">
                                                <input required id="mota" type="text" class="validate">
                                                <label for="mota">mô tả</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="file-field input-field">
                                                <div class="btn">
                                                    <span>File</span>
                                                    <input id="file" required  type="file">
                                                </div>
                                                <div class="file-path-wrapper">
                                                    <input  class="file-path validate" type="text">
                                                </div>
                                            </div>
                                        </div>
                                       
                                        <div class="row">
                                            <div id="submitBnt" class="input-field col s12">
                                                <input type="submit" class="waves-effect waves-light btn-large">
                                            </div>
                                        </div>

                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--== BOTTOM FLOAT ICON ==-->
    <section>
        <div class="fixed-action-btn vertical">
            <a class="btn-floating btn-large red pulse">
                <i class="large material-icons">mode_edit</i>
            </a>
            <ul>
                <li><a class="btn-floating red"><i class="material-icons">insert_chart</i></a>
                </li>
                <li><a class="btn-floating yellow darken-1"><i class="material-icons">format_quote</i></a>
                </li>
                <li><a class="btn-floating green"><i class="material-icons">publish</i></a>
                </li>
                <li><a class="btn-floating blue"><i class="material-icons">attach_file</i></a>
                </li>
            </ul>
        </div>
    </section>

    <!--======== SCRIPT FILES =========-->
    <script src="js/jquery.min.js"></script>
   
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/materialize.min.js"></script>
    <script src="js/custom.js"></script>
    <link href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet">
    <script>
        var link="https://localhost:5001/";

      
        var dd="";
   var html="";
       $.ajax({
       type: "get",  
       url: "https://localhost:5001/Categories/get-Category",
   
   
       success: function(data)
       {   
         
           console.log(data)
           html+="<select>";
               html+="<option selected disabled '>Chọn loại sản phẩm</option>";
           for(var i =0;i<data.length;i++)
           { 
               
               if(data[i].parentid==0)
               {
                   html+="<option disabled value='"+data[i].category_ID+"'>";
                   html+=data[i].category_Name;
                   html+="</option>";
                  childmenu(data,data[i].category_ID);
                 

               }
              
           }
           html+="</select>";
           $('select').material_select();
           $("#type").html(html)
          
          
       },
       error : function (e){      
           console.log(e)
       }
   })


   function childmenu(data,j)
   {  
       var idChildMenu=[];
       var nameChildMenu=[];
      
     
           for(var i =0;i<data.length;i++)
           {  
               if(data[i].parentid==j)
               {
                  
                   idChildMenu.push(data[i].category_ID);
                   nameChildMenu.push(data[i].category_Name);
                  
                  
               }
              
            
           }
          
           if(idChildMenu.length>0)
           {
               
            
               for(var k=0;k<idChildMenu.length;k++)
               {   dd+="---";
                   html+="<option value='"+idChildMenu[k]+"'>"; //Bắt đầu một dòng menu con với thẻ <li>
                   html+=dd;
                   html+=nameChildMenu[k];
                   
                   //Đệ quy, gọi lại chính hàm CreateChildMenu với tham số là idChildMenu hiện tại.
                   childmenu(data,idChildMenu[k]);
                   html+="</option>";
                  
               }
              
           }
           else
           {
                dd="";
           }
           
           
   }

       $("#addProduct").submit(function(e){  
           e.preventDefault();

           $("#submitBnt").html('<button class="waves-effect waves-light btn-large waves-input-wrapper buttonload">\
           <i class="fa fa-refresh fa-spin"></i> Đang thêm\
       </button>');
           var inputfile = document.getElementById('file');
           
           const formdata = new FormData()
           formdata.append("image",inputfile.files[0])
           fetch("https://api.imgur.com/3/image/", {
               method: "post",
               headers: {
                   Authorization: "Client-ID 5c31a53dda3c8e0"
               },
               body: formdata
           }).then(data => data.json()).then(data => {
               var _data={
                   "Product_Name":$("#name").val(),
                   "Price": $("#price").val(),
                   "image": data.data.link,
                   "Category_ID":$( "#type" ).val(),
                   "mota":$("#mota").val()
               }
           
               $.ajax({
                   type: "POST",
                   url: link+"product/create-item",
                   data: _data,
                   headers: {
                        Authorization: 'Bearer '+localStorage.getItem("token")
                    },
                   dataType: "json",
                   success: function(data)
                   { 
                       toastr.success("Thêm Thành Công")
                       $("#submitBnt").html('<input type="submit" class="waves-effect waves-light btn-large">');
                       $("#addProduct").trigger("reset");
                   },
                   error : function (e){      
                       console.log(e)
                   
                   }
               })
           })
       })
   </script>
</body>


<!-- Mirrored from rn53themes.net/themes/demo/lava-admin/user-add.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 May 2021 06:36:33 GMT -->
</html>