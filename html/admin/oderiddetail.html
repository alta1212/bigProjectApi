<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from rn53themes.net/themes/demo/lava-admin/user-all.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 May 2021 06:36:34 GMT -->
<head>
    <title>Lava Material - Web Application and Website Multipurpose Admin Panel Template</title>
    <!--== META TAGS ==-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!--== FAV ICON ==-->
    <link rel="shortcut icon" href="images/fav.ico">


    <!-- FONT-AWESOME ICON CSS -->
    <link rel="stylesheet" href="css/font-awesome.min.css">

    <!--== ALL CSS FILES ==-->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mob.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/materialize.css" />


    

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="js/html5shiv.js"></script>
	<script src="js/respond.min.js"></script>
	<![endif]-->
</head>

<body>
    <!--== MAIN CONTRAINER ==-->
    <div class="container-fluid sb1">
        <div class="row">
            <!--== LOGO ==-->
            <div class="col-md-2 col-sm-3 col-xs-6 sb1-1">
                <a href="#" class="btn-close-menu"><i class="fa fa-times" aria-hidden="true"></i></a>
                <a href="#" class="atab-menu"><i class="fa fa-bars tab-menu" aria-hidden="true"></i></a>
                <a href="index.html" class="logo"><img src="images/logo1.png" alt="" />
                </a>
            </div>
            <!--== SEARCH ==-->
            <div class="col-md-6 col-sm-6 mob-hide">
                <form class="app-search">
                    <input type="text" placeholder="Search..." class="form-control">
                    <a href="#"><i class="fa fa-search"></i></a>
                </form>
            </div>
            <!--== NOTIFICATION ==-->
            <div class="col-md-2 tab-hide">
                <div class="top-not-cen">
                    <a class='waves-effect btn-noti' href='#'><i class="fa fa-envelope-o" aria-hidden="true"></i><span>5</span></a>
                </div>
            </div>
            <!--== MY ACCCOUNT ==-->
            <div class="col-md-2 col-sm-3 col-xs-6">
                <!-- Dropdown Trigger -->
                <a class='waves-effect dropdown-button top-user-pro' href='#' data-activates='top-menu'><img src="images/user/6.png" alt="" />My Account <i class="fa fa-angle-down" aria-hidden="true"></i>
                </a>

                <!-- Dropdown Structure -->
                <ul id='top-menu' class='dropdown-content top-menu-sty'>
                    <li><a href="setting.html" class="waves-effect"><i class="fa fa-cogs" aria-hidden="true"></i>Admin Setting</a>
                    </li>
                    <li><a href="listing-all.html" class="waves-effect"><i class="fa fa-list-ul" aria-hidden="true"></i> Listings</a>
                    </li>
                    <li><a href="hotel-all.html" class="waves-effect"><i class="fa fa-building-o" aria-hidden="true"></i> Hotels</a>
                    </li>
                    <li><a href="package-all.html" class="waves-effect"><i class="fa fa-umbrella" aria-hidden="true"></i> Tour Packages</a>
                    </li>
                    <li><a href="event-all.html" class="waves-effect"><i class="fa fa-flag-checkered" aria-hidden="true"></i> Events</a>
                    </li>
                    <li><a href="offers.html" class="waves-effect"><i class="fa fa-tags" aria-hidden="true"></i> Offers</a>
                    </li>
                    <li><a href="user-add.html" class="waves-effect"><i class="fa fa-user-plus" aria-hidden="true"></i> Add New User</a>
                    </li>
                    <li><a href="#" class="waves-effect"><i class="fa fa-undo" aria-hidden="true"></i> Backup Data</a>
                    </li>
                    <li class="divider"></li>
                    <li><a href="#" class="ho-dr-con-last waves-effect"><i class="fa fa-sign-in" aria-hidden="true"></i> Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!--== BODY CONTNAINER ==-->
    <div class="container-fluid sb2">
        <div class="row">
            <div class="sb2-1">
                <!--== USER INFO ==-->
                <div class="sb2-12">
                    <ul>
                        <li><img src="images/placeholder.jpg" alt="">
                        </li>
                        <li>
                            <h5>Victoria Baker <span> Santa Ana, CA</span></h5>
                        </li>
                        <li></li>
                    </ul>
                </div>
                <!--== LEFT MENU ==-->
                <div class="sb2-13">
                    <ul class="collapsible" data-collapsible="accordion">
                        <li><a href="index.html" class="menu-active"><i class="fa fa-bar-chart" aria-hidden="true"></i> Dashboard</a>
                        </li>
                        <li><a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-list-ul" aria-hidden="true"></i>Bill</a>
                            <div class="collapsible-body left-sub-menu">
                                <ul>
                                    <li><a href="order-all.html">All oder</a>
                                    </li>
                                    
                                </ul>
                            </div>
                        </li>
                        <li><a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-umbrella" aria-hidden="true"></i> Product </a>
                            <div class="collapsible-body left-sub-menu">
                                <ul>
                                    <li><a href="product-all.html">All Product</a>
                                    </li>
                                    <li><a href="product-add.html">Add New Product</a>
                                    </li>
                                  
                                </ul>
                            </div>
                        </li>
                        <li><a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-h-square" aria-hidden="true"></i> Categories</a>
                            <div class="collapsible-body left-sub-menu">
                                <ul>
                                    <li><a href="category-all.html">All Categories</a>
                                    </li>
                                    <li><a href="category-add.html">Add New Categories</a>
                                    </li>
                                   
                                </ul>
                            </div>
                        </li>
                        <li class=""><a href="javascript:void(0)" class="collapsible-header"><i class="fa fa-user" aria-hidden="true"></i> Users</a>
                            <div class="collapsible-body left-sub-menu" style="display: none;">
                                <ul>
                                    <li><a href="user-all.html">All Users</a>
                                    </li>
                                    <li><a href="user-add.html">Add New user</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="sb2-2">
                <div class="sb2-2-2">
                    <ul>
                        <li><a href="#"><i class="fa fa-home" aria-hidden="true"></i> Home</a>
                        </li>
                        <li class="active-bre"><a href="#"> Ui Form</a>
                        </li>
                    </ul>
                </div>
                <div class="sb2-2-3">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="box-inn-sp">
                                <div class="inn-title">
                                    <h4>Sản phẩm</h4>
                                
                                    <a class="dropdown-button drop-down-meta" href="#" data-activates="dr-users"><i class="material-icons">more_vert</i></a>
                                    <ul id="dr-users" class="dropdown-content">
                                        <li><a href="user-add.html">Add New</a>
                                        </li>
                                        <li><a href="user-edit.html">Edit</a>
                                        </li>
                                        <li><a href="#!">Update</a>
                                        </li>
                                        <li class="divider"></li>
                                        <li><a href="#!"><i class="material-icons">delete</i>Delete</a>
                                        </li>
                                        <li><a href="user-view.html"><i class="material-icons">subject</i>View All</a>
                                        </li>
                                    </ul>

                                    <!-- Dropdown Structure -->

                                </div>
                               
                                <div class="tab-inn">
                                    <div class="table-responsive table-desi">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Tên Sản phẩm</th>
                                                    <th>Ảnh sản phẩm</th>
                                                    <th>Số lượng</th>
                                                    <th>Tổng tiền</th>
                                                   
                                                    
                                                </tr>
                                            </thead>
                                            <tbody id="listProduct">
                                                
                                             
                                              
                                            </tbody>
                                           
                                        </table> 
                                        <div style="float: right;" class="">
                                                <div  class="input-field col s12">
                                                    <button id="submitBnt" class="waves-effect waves-light btn-large">Cập nhật</Button>
                                                    <button  data-toggle="modal" data-target="#exampleModal"  class="waves-effect waves-light btn-large">Thêm sản phẩm</Button>
                                                </div>
                                              
                                        </div>
                                    </div>
                                    <!-- Modal -->
                                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h3 class="modal-title" id="exampleModalLabel">Thêm sản phẩm vào đơn hàng</h3>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="row">
                                                <div class="input-field col s6">
                                                    <select id="type" required>
                                                        <option value="" disabled selected>Chọn sản phẩm để thêm</option>
                                                       
                                                    </select>
                                                    <label>Chọn sản phẩm</label>
                                                </div>
                                              
                                               
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" id="addBnt" class="btn btn-secondary" >Thêm</button>
                                       
                                        </div>
                                    </div>
                                    </div>
                                </div>
  
                                    <nav  style="color: #fff; 
                                    background-color:#fff; 
                                     width: 100%; 
                                     height: 56px; 
                                     line-height: 56px;
                                     box-shadow:0 0 0" aria-label="...">
                                        <ul id="pageList" class="pagination">
   
                                        </ul>
                                      </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <!-- </div> -->
        </div>
    </div>

    <!--== BOTTOM FLOAT ICON ==-->
    <section>
        <div class="fixed-action-btn vertical">
            <a class="btn-floating btn-large red pulse">
                <i class="large material-icons">mode_edit</i>
            </a>
            <ul>
                <li><a class="btn-floating red"><i class="material-icons">insert_chart</i></a>
                </li>
                <li><a class="btn-floating yellow darken-1"><i class="material-icons">format_quote</i></a>
                </li>
                <li><a class="btn-floating green"><i class="material-icons">publish</i></a>
                </li>
                <li><a class="btn-floating blue"><i class="material-icons">attach_file</i></a>
                </li>
            </ul>
        </div>
    </section>

    <!--======== SCRIPT FILES =========-->
    <script src="js/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <link href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet">
    <script>
        function changeqty(elm)
        {
            console.log(elm.parents().eq(1).find("td span.total a").html(elm.parents().eq(1).find("td a.pro_price").html()*elm.val()))

 
        }

            var html="";
            $.ajax({
            type: "get",  
            url: "https://localhost:5001/product/get-all",
        
        
            success: function(data)
            {   
            
                console.log(data)
                html+="<select>";
                   
                for(var i =0;i<data.length;i++)
                { 
                    
                   
                        html+="<option data-name='"+data[i].product_Name+"' data-price='"+data[i].price+"' data-image='"+data[i].image+" '>";
                        html+=data[i].product_Name;
                        html+="</option>";
               
                
                }
                html+="</select>";

                $("#type").html(html)
                console.log(html)
                $('select').material_select();
            
            },
            error : function (e){      
                console.log(e)
            }
        })





        var link="https://localhost:5001/";
        var id = location.search.slice(1).split("&")[0].split("=")[1]
          $(".page-item").removeClass("active")
            $.ajax({
            type: "get",  
            url: link+"user/orderdetail/"+id,
            headers: {
                        Authorization: 'Bearer '+localStorage.getItem("token")
                    },
            success: function(data)
            {   
                var html="";
                console.log(data)
                for(var i=0;i<data.length;i++)
                {   
                   // var price =parseFloat(data[i].price, 10).toFixed(1).replace(/(\d)(?=(\d{3})+\.)/g, "$1,").toString()+" VNĐ";
                    html+='<tr>\
                        <td><a href="#"><span  class="list-enq-name name">'+data[i].orderDetail_Name+'</span></a>\
                                                    </td>\
                                                    <td><span class="list-img"><img src="'+data[i].orderDetail_Image+'" alt=""></span>\
                                                    </td>\
                                                    <td style="display: none;" ><a class="pro_price" >'+data[i].price+'</a>\
                                                    </td>\
                                                    <td class="get"><input id-detail="'+data[i].orderDetail_ID+'" class="pro_quantity" onchange="changeqty($(this))" type="number" value="'+data[i].quantity+'">\
                                                    </td>\
                                                    <td><span class="list-enq-name total"><a style="color: black;">'+data[i].total+'</a> $</span>\
                                                    </td>\
                                                    <td><a onclick="deletethisrow($(this))" href="#"><span class="list-enq-name">X</span></a>\
                                                    </td>\
                                                </tr>'
                
                }
            
              
                $("#listProduct").html(html);
            },
            error : function (e){      
                console.log(e)
            
            }
        })
       
        function deletethisrow(e)
        {
            console.log(e.parents().eq(1).remove())
        }
        
        $("#submitBnt").click(function()
        {
            var model = [];
            $("table #listProduct tr").each(function() {

                            var k={
                                "OrderDetail_ID":$(this).find("td input").attr("id-detail"),
                                "Quantity":$(this).find("td input").val(),
                                "OrderDetail_OrderID":id,
                                "OrderDetail_Name":$(this).find("td span.name").html(),
                                "OrderDetail_Image":$(this).find("td span.list-img img").attr("src"),
                                "total":$(this).find("td span.total a").html(),
                                "price":$(this).find("td a.pro_price").html()
                            }
                            model.push(k)
                        });
                        console.log(JSON.stringify(model))
          $.ajax({
          type: "POST",
          url: "https://localhost:5001/Admin/updateorder",
          data: JSON.stringify(model),
          dataType: "json",
          contentType: 'application/json; charset=utf-8',
          headers: {
                        Authorization: 'Bearer '+localStorage.getItem("token")
                    },
          success: function(data)
          { 
            toastr.success("cập nhật đơn hàng thành công")
          },
          error : function (e){      
              console.log(e)
          
          }
          })
        })
       
 
        $("#addBnt").click(function(){
            var k=$("#type :selected");
            console.log(k.data())
          var htmloption='<tr>\
                        <td><a href="#"><span  class="list-enq-name name">'+k.data("name")+'</span></a>\
                                                    </td>\
                                                    <td><span class="list-img"><img src="'+k.data("image")+'" alt=""></span>\
                                                    </td>\
                                                    <td style="display: none;" ><a class="pro_price" >'+k.data("price")+'</a>\
                                                    </td>\
                                                    <td class="get"><input id-detail="" class="pro_quantity" onchange="changeqty($(this))" type="number" value="1">\
                                                    </td>\
                                                    <td><span class="list-enq-name total"><a style="color: black;">'+k.data("price")+'</a> $</span>\
                                                    </td>\
                                                    <td><a onclick="deletethisrow($(this))" href="#"><span class="list-enq-name">X</span></a>\
                                                    </td>\
                                                </tr>'
            $("#listProduct").append(htmloption);                             
        })
 
 </script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/materialize.min.js"></script>
    <script src="js/custom.js"></script>
    
</body>


<!-- Mirrored from rn53themes.net/themes/demo/lava-admin/user-all.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 May 2021 06:36:36 GMT -->
</html>